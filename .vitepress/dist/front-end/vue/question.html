<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue 题目 | 无限进步</title>
    <meta name="description" content="orange的学习文档">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/my-docs/assets/style.qrHaQcSc.css" as="style">
    <link rel="preload stylesheet" href="/my-docs/vp-icons.css" as="style">
    
    <script type="module" src="/my-docs/assets/app.RkWfUyNT.js"></script>
    <link rel="preload" href="/my-docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/my-docs/assets/chunks/theme.cx6tdLLP.js">
    <link rel="modulepreload" href="/my-docs/assets/chunks/framework.B3NJvPgC.js">
    <link rel="modulepreload" href="/my-docs/assets/front-end_vue_question.md.CQmGe1Qy.lean.js">
    <link rel="icon" href="/my-docs/logo.jpg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-8d5df4f8><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0e3cf387></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0e3cf387>Skip to content</a><!--]--><!----><header class="VPNav" data-v-8d5df4f8 data-v-9f70b619><div class="VPNavBar" data-v-9f70b619 data-v-48a8dca0><div class="wrapper" data-v-48a8dca0><div class="container" data-v-48a8dca0><div class="title" data-v-48a8dca0><div class="VPNavBarTitle has-sidebar" data-v-48a8dca0 data-v-f38ada2d><a class="title" href="/my-docs/" data-v-f38ada2d><!--[--><!--]--><!--[--><img class="VPImage logo" src="/my-docs/logo.jpg" alt data-v-6c1a8255><!--]--><span data-v-f38ada2d>无限进步</span><!--[--><!--]--></a></div></div><div class="content" data-v-48a8dca0><div class="content-body" data-v-48a8dca0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-48a8dca0><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-48a8dca0 data-v-23063685><span id="main-nav-aria-label" class="visually-hidden" data-v-23063685> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-docs/" tabindex="0" data-v-23063685 data-v-8edfb69a><!--[--><span data-v-8edfb69a>Home</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-48a8dca0 data-v-13509d08><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-13509d08 data-v-68a93fa8 data-v-8d56101e><span class="check" data-v-8d56101e><span class="icon" data-v-8d56101e><!--[--><span class="vpi-sun sun" data-v-68a93fa8></span><span class="vpi-moon moon" data-v-68a93fa8></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-48a8dca0 data-v-57bb69b5 data-v-737951b2><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-737951b2 data-v-76a75d6e><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-48a8dca0 data-v-09cd79e2 data-v-47c1fc9e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-47c1fc9e><span class="vpi-more-horizontal icon" data-v-47c1fc9e></span></button><div class="menu" data-v-47c1fc9e><div class="VPMenu" data-v-47c1fc9e data-v-3511fbca><!----><!--[--><!--[--><!----><div class="group" data-v-09cd79e2><div class="item appearance" data-v-09cd79e2><p class="label" data-v-09cd79e2>Appearance</p><div class="appearance-action" data-v-09cd79e2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-09cd79e2 data-v-68a93fa8 data-v-8d56101e><span class="check" data-v-8d56101e><span class="icon" data-v-8d56101e><!--[--><span class="vpi-sun sun" data-v-68a93fa8></span><span class="vpi-moon moon" data-v-68a93fa8></span><!--]--></span></span></button></div></div></div><div class="group" data-v-09cd79e2><div class="item social-links" data-v-09cd79e2><div class="VPSocialLinks social-links-list" data-v-09cd79e2 data-v-737951b2><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-737951b2 data-v-76a75d6e><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-48a8dca0 data-v-68625d1a><span class="container" data-v-68625d1a><span class="top" data-v-68625d1a></span><span class="middle" data-v-68625d1a></span><span class="bottom" data-v-68625d1a></span></span></button></div></div></div></div><div class="divider" data-v-48a8dca0><div class="divider-line" data-v-48a8dca0></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-8d5df4f8 data-v-6b4933e1><div class="container" data-v-6b4933e1><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-6b4933e1><span class="vpi-align-left menu-icon" data-v-6b4933e1></span><span class="menu-text" data-v-6b4933e1>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-6b4933e1 data-v-9a4326dd><button data-v-9a4326dd>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-8d5df4f8 data-v-5f01db6f><div class="curtain" data-v-5f01db6f></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-5f01db6f><span class="visually-hidden" id="sidebar-aria-label" data-v-5f01db6f> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c96cbc35><section class="VPSidebarItem level-0" data-v-c96cbc35 data-v-1bae6f65><div class="item" role="button" tabindex="0" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><h2 class="text" data-v-1bae6f65>Examples</h2><!----></div><div class="items" data-v-1bae6f65><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/markdown-examples.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>Markdown Examples</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/api-examples.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>Runtime API Examples</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c96cbc35><section class="VPSidebarItem level-0 has-active" data-v-c96cbc35 data-v-1bae6f65><div class="item" role="button" tabindex="0" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><h2 class="text" data-v-1bae6f65>前端面试题</h2><!----></div><div class="items" data-v-1bae6f65><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/front-end/html+css/question.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>HTML+CSS 题目</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/front-end/js/question.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>JavaScript 题目</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/front-end/ts/question.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>TypeScript 题目</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/front-end/code/question.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>代码编程 题目</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/front-end/http/question.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>计算机网络 题目</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/front-end/vue/question.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>vue 题目</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c96cbc35><section class="VPSidebarItem level-0" data-v-c96cbc35 data-v-1bae6f65><div class="item" role="button" tabindex="0" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><h2 class="text" data-v-1bae6f65>微信小程序</h2><!----></div><div class="items" data-v-1bae6f65><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1bae6f65 data-v-1bae6f65><div class="item" data-v-1bae6f65><div class="indicator" data-v-1bae6f65></div><a class="VPLink link link" href="/my-docs/front-end/wx/comparisonChart.html" data-v-1bae6f65><!--[--><p class="text" data-v-1bae6f65>对比图</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-8d5df4f8 data-v-21bca2ee><div class="VPDoc has-sidebar has-aside" data-v-21bca2ee data-v-4fc62ba4><!--[--><!--]--><div class="container" data-v-4fc62ba4><div class="aside" data-v-4fc62ba4><div class="aside-curtain" data-v-4fc62ba4></div><div class="aside-container" data-v-4fc62ba4><div class="aside-content" data-v-4fc62ba4><div class="VPDocAside" data-v-4fc62ba4 data-v-9b280cd9><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-9b280cd9 data-v-9d434aba><div class="content" data-v-9d434aba><div class="outline-marker" data-v-9d434aba></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-9d434aba>文章目录</div><ul class="VPDocOutlineItem root" data-v-9d434aba data-v-1c3bb192><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-9b280cd9></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4fc62ba4><div class="content-container" data-v-4fc62ba4><!--[--><!--]--><main class="main" data-v-4fc62ba4><div style="position:relative;" class="vp-doc _my-docs_front-end_vue_question" data-v-4fc62ba4><div><h1 id="vue-题目" tabindex="-1">vue 题目 <a class="header-anchor" href="#vue-题目" aria-label="Permalink to &quot;vue 题目&quot;">​</a></h1><h2 id="_1-问题-vue2-不能监听数组下标原因" tabindex="-1">1. 问题：vue2 不能监听数组下标原因 <a class="header-anchor" href="#_1-问题-vue2-不能监听数组下标原因" aria-label="Permalink to &quot;1. 问题：vue2 不能监听数组下标原因&quot;">​</a></h2><ul><li>vue2 使用 Object.defineProperty()来监听对象属性的变化，而数组的下标是对象的属性，所以不能直接监听数组下标。</li><li>Object.defineProperty()是可以劫持数组的</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr, key, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key:&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newVal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value:&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newVal);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 输出 key:1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// value:4</span></span></code></pre></div><ul><li>真实情况： 是 Object.defineProperty 可以劫持数组而 vue2 没有用来劫持数组</li><li>原因：Object.defineProperty()是属性级别的劫持，如果按上面代码的方式劫持，随着数组长度增加，会有很大的性能损耗，导致框架的性能不稳定，因此 vue2 放弃一定的用户便利性，提供$set 方法去操作数组，以最大程度保证框架的性能稳定。</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue2 示例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        list: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不会触发响应式更新</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;x&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ❌ 不会触发视图更新</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ❌ 不会触发视图更新</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ 正确的方式 - 使用变异方法</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">splice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;x&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 替换第一个元素</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;new item&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加新元素</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ 使用 Vue.set 或 this.$set</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;x&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ 使用新数组替换</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;x&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.list.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span></code></pre></div><h2 id="_2-问题-vue2-和-vue3-的具体区别" tabindex="-1">2. 问题：vue2 和 vue3 的具体区别 <a class="header-anchor" href="#_2-问题-vue2-和-vue3-的具体区别" aria-label="Permalink to &quot;2. 问题：vue2 和 vue3 的具体区别&quot;">​</a></h2><ol><li><strong>响应式系统</strong>： <ul><li>Vue2 使用<code>Object.defineProperty</code>来实现其响应式系统。这种方法有一些限制，例如无法检测属性的添加或删除，以及无法直接处理数组索引和长度的变化。</li><li>Vue3 使用了基于 ES6 的<code>Proxy</code>对象来实现响应式系统。<code>Proxy</code>可以直接监听对象的变化，包括属性的添加、删除、数组索引的变化等，因此 Vue3 可以更灵活地处理响应式需求。</li></ul></li><li><strong>组合式 API</strong>： <ul><li>Vue2 主要通过选项式 API（如 data,methods,computed 等）来组织代码。</li><li>Vue3 则引入了组合式 API（如 ref,reactive,computed,watch），允许开发者更灵活地组织代码，并且可以更好地利用 Vue3 的新特性。</li></ul></li><li><strong>性能相关</strong>： <ul><li>Vue3 在性能方面有显著提升。他包括更小的打包大小，更快的虚拟 DOM 重写，更高效的组件初始化等</li><li>Vue2 相比之下在性能方面相对较慢，尤其是在处理大型应用和复杂组件时</li></ul></li><li><strong>TypeScript 支持</strong>： <ul><li>Vue3 从一开始就以 TypeScript 编写，提供了更好的类型检查和开发体验。</li><li>Vue2 则需要额外的类型定义文件（如<code>.d.ts</code>文件）来支持 TypeScript。</li></ul></li><li><strong>新特性和改进</strong>： <ul><li>Vue3 引入了多个新特性，如 Teleport,Fragment,Suspense 等，这些特性使得组件的组织和渲染更加灵活。</li></ul></li><li><strong>Fragment</strong>： <ul><li>Vue2 要求每个组件必须有一个单独的根节点</li><li>Vue3 允许多个根节点（Fragment），这使得组件模块可以有多个并列的根元素。</li></ul></li><li><strong>自定义渲染器 API</strong>： <ul><li>Vue3 提供了自定义渲染器 API，允许开发者创建自己的渲染逻辑</li></ul></li><li><strong>更好的模块化</strong>： <ul><li>Vue3 对内部模块进行了更好的分离，使 tree-shaking 更加有效，有助于减少最终的打包体积</li></ul></li><li><strong>静态元素提升（Static Hoisting）</strong>： <ul><li>Vue2 中，模块中的所有元素在每次重新渲染时都会被创建新的虚拟节点（VNode），包括静态元素（不变的 HTML 和文本）</li><li>Vue3 引入了静态元素提升的概念。在编译模块时，vue3 会检测出静态内容并将其提升，意味着这些内容只在初始渲染时创建一次。后续的渲染中，静态内容会被重用，从而减少了渲染开销和提升了性能。</li></ul></li><li><strong>虚拟节点静态标记（Patch Flag）</strong><ul><li>Vue2 在更新组件时，会进行相对全面的虚拟 DOM 比较，这可能会导致性能开销</li><li>Vue3 引入了 Path Flag 这是一种优化技术，他在编译时标记虚拟节点的动态部分。这样在组件更新时 Vue 只选哟关注这些被标记的部分，而不是整个组件树，从而显著提升了性能</li></ul></li><li><strong>生命周期变化</strong><ul><li>Vue2 提供了一系列的生命周期钩子，如 created mounted updated destroyed 等</li><li>Vue3 对这些生命周期钩子进行了重命名和调整，以更好的与 composition API 配合。例如 beforeDestory 和 destoryed 分别更名为 beforeUnmount 和 unmounted。此外，Vue3 还引入了新的生命周期钩子，如 onMounted,onUpdated,onUnmounted 等，这些钩子更符合组合式 API 的风格。</li></ul></li><li><strong>打包体积优化</strong><ul><li>Vue2 打包体积相对较大，尤其是在包含了全框架的所有特性时</li><li>Vue3 进行了大量的打包体积优化。他采用了更有效的树摇（Tree-shaking）机制，允许去除未使用的代码部分。这意味着如果你只使用 vue 的一部分功能，最终打包出来的文件会更小</li></ul></li></ol><h2 id="_3-问题-vue-的通讯方式" tabindex="-1">3. 问题：vue 的通讯方式 <a class="header-anchor" href="#_3-问题-vue-的通讯方式" aria-label="Permalink to &quot;3. 问题：vue 的通讯方式&quot;">​</a></h2><p>通讯用于组件间数据传递与共享</p><ul><li><p><strong>vue 中有 8 种常规的通讯方式</strong></p><ul><li>通过 props 传递</li><li>通过$emit 触发自定义事件</li><li>使用 ref</li><li>EventBus</li><li>$parent或$root</li><li>attrs 与 listeners</li><li>Provide 与 Inject</li><li>Vuex</li></ul></li><li><p><strong>组件间通信的分类可以分成以下</strong></p><ul><li>父子关系的组件数据传递选择 props 与$emit 进行传递，也可选择 ref</li><li>兄弟组件之间的通信（EventBus）其次可以选择$parent 进行传递</li><li>祖先与后代组件数据传递可选择 attrs 与 listeners 或者 Provide 与 Inject</li><li>Vuex 状态管理（全局状态共享）</li></ul></li></ul><h2 id="_4-问题-vue-的常用修饰符" tabindex="-1">4. 问题：vue 的常用修饰符 <a class="header-anchor" href="#_4-问题-vue-的常用修饰符" aria-label="Permalink to &quot;4. 问题：vue 的常用修饰符&quot;">​</a></h2><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1、表单修饰符 （1）.lazy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">在默认情况下，v-model在每次input事件触发后将输入框的值与数据进行同步，可以添加lazy修饰符，从而转为在change事件之后进行同步</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model.lazy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">（2）.number 如果想自动将用户的输入值转为数值类型，可以添加number修饰符</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model.number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">（3）.trim 如果要自动过滤用户输入的首尾空格，可以添加trim修饰符</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model.trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2、事件修饰符 （1）.stop 阻止单击事件继续传播，即停止事件的冒泡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;divClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click.stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btnClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;点击我&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">（2）.prevent 阻止标签的默认事件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.baidu.com&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;_blank&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click.prevent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clickJump&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;点击跳转&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">（3）.capture 事件先在有capture修饰符的元素捕获，然后再在目标元素触发</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 这里先执行divClick 然后再执行btnClick --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click.capture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;divClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btnClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;点击我&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">（4）.self 只有事件目标是当前元素时触发回调,即事件不是从内部元素触发的</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 这里点击按钮不会触发divClick，只有点击test才会触发 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click.self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;divClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  test</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btnClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;点击我&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">（5）.once 事件只触发一次</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-on:click.once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;aClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;点击我&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">（6）.passive</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.passive修饰符尤其能提升移动端的性能，传统上，滚动事件监听器会阻止滚动事件的默认行为。这意味着如果你在一个滚动容器种监听滚动事件，并且在事件处理程序种执行了某些操作（例如更新DOM或执行计算密集型任务），浏览器会等待事件处理程序执行完毕后在执行滚动操作，着可能导致滚动不平滑或卡顿。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.passive修饰符的作用是告诉浏览器，滚动事件监听器不会阻止滚动事件的默认行为，因为浏览器可以在滚动事件监听器执行时立即进行滚动操作，从而是西安更加流畅的滚动体验。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">使用.passive修饰符可以提高页面的响应性能，尤其是在处理大量滚动事件时。但是.passive修饰符只在支持addEventListener方法的浏览器中有效，并且只能用于滚动事件监听器。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 滚动事件的默认行为（即滚动行为）将会立即触发 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 而不会等待handleScroll执行完毕 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 这其中包含`event.preventDefault()`的情况 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @scroll.passive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;handleScroll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- 内容 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="_5-问题-vue2-初始化过程做了哪些事情" tabindex="-1">5. 问题：vue2 初始化过程做了哪些事情 <a class="header-anchor" href="#_5-问题-vue2-初始化过程做了哪些事情" aria-label="Permalink to &quot;5. 问题：vue2 初始化过程做了哪些事情&quot;">​</a></h2><ol><li>构造函数初始化</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue 构造函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;production&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    warn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Vue is a constructor and should be called with the `new` keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 核心初始化方法</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="2"><li>_init()方法 - 核心初始化流程</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_init</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 合并配置项</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options._isComponent) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 组件初始化</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    initInternalComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, options);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 根实例初始化</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vm.$options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mergeOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      resolveConstructorOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      vm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化生命周期</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  initLifecycle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化事件系统</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  initEvents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化渲染函数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  initRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 调用 beforeCreate 钩子</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  callHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;beforeCreate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化依赖注入</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  initInjections</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化响应式数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  initState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化 provide</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  initProvide</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 调用 created 钩子</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  callHook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;created&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果提供了 el 选项，则自动挂载</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (vm.$options.el) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vm.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm.$options.el);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><strong>初始化过程总结</strong></p><ol><li>配置合并：合并全局配置和实例配置</li><li>生命周期初始化：建立组件关系树</li><li>事件系统初始化：处理父组件传递的事件</li><li>渲染函数初始化：创建虚拟 DOM 相关函数</li><li>调用 beforeCreate 钩子</li><li>依赖注入初始化</li><li>响应式数据初始化（核心）： <ul><li>初始化 props、methods、data、computed、watch</li><li>建立数据响应式系统</li><li>代理 data 到实例</li></ul></li><li>provide 初始化</li><li>调用 created 钩子</li><li>自动挂载（如果提供了 el 选项）</li></ol><h2 id="_6-问题-created-和-mounted-这两个生命周期的区别" tabindex="-1">6. 问题：created 和 mounted 这两个生命周期的区别 <a class="header-anchor" href="#_6-问题-created-和-mounted-这两个生命周期的区别" aria-label="Permalink to &quot;6. 问题：created 和 mounted 这两个生命周期的区别&quot;">​</a></h2><ul><li><strong><code>created</code>生命周期钩子</strong>： <ul><li><code>created</code>生命周期钩子在组件实例被创建之后立即被调用</li><li>在这个阶段，组件实例已经被创建，但它的模块还没有渲染到 DOM 中。可以在这个阶段执行一些与数据初始化和逻辑相关的任务，但无法访问到已经渲染的 DOM 元素</li><li>通常用于进行数据的初始化，设置初始状态，艰辛异步请求（例如获取数据），以及数据准备好后执行逻辑</li><li>不能操作 DOM 元素，因为 DOM 还没有被渲染</li></ul></li><li><strong><code>mounted</code>生命周期钩子</strong>： <ul><li><code>mounted</code>生命周期钩子在组件实例被挂载到 DOM 之后被调用</li><li>在这个阶段，组件实例的模块已经渲染到 DOM 中，并且可以访问到 DOM 元素，这通常用于执行需要访问 DOM 的任务，例如操作 DOM 元素，添加事件监听器，或执行与 DOM 相关的操作</li><li>通常用于进行 DOM 操作、初始化第三方库、发送网络请求等需要依赖 DOM 的任务</li><li>可以操作 DOM 元素，因为 DOM 已经被渲染</li></ul></li></ul><h2 id="_7-问题-vue-的-nexttick-是如何实现的" tabindex="-1">7. 问题：vue 的$nextTick 是如何实现的 <a class="header-anchor" href="#_7-问题-vue-的-nexttick-是如何实现的" aria-label="Permalink to &quot;7. 问题：vue 的$nextTick 是如何实现的&quot;">​</a></h2><ul><li>当调用<code>this.$nextTick(callback)</code>时，会将<code>callback</code>函数存储在一个队列中，以便稍后执行。</li><li>检查当前是否正在进行 DOM 更新周期。如果是，它会将<code>callback</code>函数推到一个专门用于在更新周期结束后执行的队列中</li><li>如果当前不在 DOM 更新周期中，Vue.js 会使用 JavaScript 的<code>Promise</code>或<code>MutationObserver</code>，具体取决于浏览器支持情况，来创建一个微任务（microtask）。</li><li>微任务是 JavaScript 引擎在执行栈清空后立即执行的任务。因此，<code>callback</code>函数会在下一个微任务中被执行，这就确保了它在下一次 DOM 更新周期之前执行</li><li>一旦当前的执行栈清空，JavaScript 引擎就会检查并执行微任务队列中的任务，其中包括<code>$nextTick</code>队列中的任务。</li></ul><h2 id="_8-问题-为什么-vue-中的-data-是一个-function-而不是普通-object" tabindex="-1">8. 问题：为什么 vue 中的 data 是一个 function 而不是普通 object <a class="header-anchor" href="#_8-问题-为什么-vue-中的-data-是一个-function-而不是普通-object" aria-label="Permalink to &quot;8. 问题：为什么 vue 中的 data 是一个 function 而不是普通 object&quot;">​</a></h2><ul><li>因为 vue 组件是可复用的，而每个组件实例都应该有自己的独立数据副本。如果 data 是一个普通 object，所有组件实例都会共享同一个数据对象，这会导致数据污染和不可预测的行为。</li><li>为了避免这个问题，vue 将 data 定义为一个 function，每个组件实例在创建时会调用这个 function 来返回一个新的数据对象。这样每个组件实例都有自己独立的数据副本，互不干扰。</li><li>同时，将 data 定义为一个 function 也符合 vue 的组件化设计思想，每个组件都是一个独立的模块，应该有自己的状态管理。</li></ul><h2 id="_9-问题-vue-的父组件和子组件生命周期钩子函数执行顺序" tabindex="-1">9. 问题：vue 的父组件和子组件生命周期钩子函数执行顺序 <a class="header-anchor" href="#_9-问题-vue-的父组件和子组件生命周期钩子函数执行顺序" aria-label="Permalink to &quot;9. 问题：vue 的父组件和子组件生命周期钩子函数执行顺序&quot;">​</a></h2><ul><li><strong>加载渲染过程</strong>：父 beforeCreate -&gt; 父 created -&gt; 父 beforeMount -&gt; 子 beforeCreate -&gt; 子 created -&gt; 子 beforeMount -&gt; 子 mounted -&gt; 父 mounted</li><li><strong>子组件更新过程</strong>：父 beforeUpdate -&gt; 子 beforeUpdate -&gt; 子 updated -&gt; 父 updated</li><li><strong>父组件更新过程</strong>：父 beforeUpdate -&gt; 父 updated</li><li><strong>父组件销毁过程</strong>：父 beforeDestroy -&gt; 子 beforeDestroy -&gt; 子 destroyed -&gt; 父 destroyed</li></ul><h2 id="_10-问题-watch-和-computed-有什么区别" tabindex="-1">10. 问题：watch 和 computed 有什么区别 <a class="header-anchor" href="#_10-问题-watch-和-computed-有什么区别" aria-label="Permalink to &quot;10. 问题：watch 和 computed 有什么区别&quot;">​</a></h2><ul><li><p><strong><code>computed</code></strong></p><ul><li>计算属性：<code>computed</code>是用于创建计算属性的方式，它依赖于 Vue 的响应式系统来进行数据追踪。当依赖的数据发生变化时，计算属性会自动重新计算，而且旨在必要时才重新计算</li><li>缓存： 计算属性具有缓存机制，只有在它依赖的数据发生变化时，计算属性才会重新计算，这意味着多次访问同一个计算属性会返回相同的结果，而不会重新计算。</li><li>无副作用： 计算属性应当是无副作用的，他们只是基于数据的计算，并不会修改数据本身</li><li>用于模板中： 计算属性通常用于模板中，以便在模板中显示派生数据</li><li>必须同步：只对同步代码中的依赖响应</li></ul></li><li><p><strong><code>watch</code></strong></p><ul><li>监听数据：<code>watch</code>用于监听数据变化，你可以监听一个或多个数据的变化，以执行自定义的响应操作</li><li>副作用操作：<code>watch</code>中的回调函数可以执行副作用操作，例如发送网络请求，手动操作 DOM，或执行其他需要的逻辑</li><li>不缓存： <code>watch</code>中的回调函数会在依赖数据变化时立即被触发，不会像<code>computed</code>那样具有缓存机制</li><li>用于监听数据变化： <code>watch</code>通常用于监听数据的变化，而不是用于在模板中显示数据</li><li>支持异步：在检测数据变化后，可进行同步或异步操作</li></ul></li></ul><h2 id="_12-问题-computed-的机制-缓存了什么-为什么不支持异步" tabindex="-1">12. 问题：computed 的机制，缓存了什么？为什么不支持异步？ <a class="header-anchor" href="#_12-问题-computed-的机制-缓存了什么-为什么不支持异步" aria-label="Permalink to &quot;12. 问题：computed 的机制，缓存了什么？为什么不支持异步？&quot;">​</a></h2><ul><li><p>Vue.js 中的<code>computed</code>属性确实具有缓存机制，这个缓存机制实际上是指对计算属性的指进行了缓存。当你在模板中多次访问同一个计算属性时，Vue.js 只会计算一次这个属性的值，然后将结果缓存起来，以后再次访问时会直接返回缓存的结果，而不会重新计算。</p></li><li><p>假设你有一个计算属性<code>fullName</code>,它依赖于<code>firstName</code>和<code>lastName</code>。当<code>firstName</code>或<code>lastName</code>发生变化时，<code>fullName</code>会自动重新计算。但是，假设你在模板中多次访问<code>fullName</code>，Vue.js 只会计算一次<code>fullName</code>的值，然后将结果缓存起来。以后再次访问<code>fullName</code>时，Vue.js 会直接返回缓存的结果，而不会重新计算。</p></li><li><p>vue 设计层面决定了 computed 不支持异步，computed 的定义，“依赖值改变 computed 值就会改变”，所以这里必须是同步的，否则就可能“依赖值改变但 computed 值未改变”，一旦 computed 支持异步，computed 就违背了定义，会变得不稳定。相反，watch 的定义是“监听的数据改变后，它做某件事”，那 watch 在监听变化后，做同步异步都可以，并不违背定义。</p></li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 有效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.b  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 有效</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 无效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 外部接住promise</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.b)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 输出</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_13-问题-vue3-中-ref-和-reactive-的区别-区分-ref-和-reactive-的原因" tabindex="-1">13. 问题：vue3 中 ref 和 reactive 的区别，区分 ref 和 reactive 的原因 <a class="header-anchor" href="#_13-问题-vue3-中-ref-和-reactive-的区别-区分-ref-和-reactive-的原因" aria-label="Permalink to &quot;13. 问题：vue3 中 ref 和 reactive 的区别，区分 ref 和 reactive 的原因&quot;">​</a></h2><ul><li>ref 生成响应式对象，主要用于处理基础数据类型（如数字、字符串、布尔值）</li><li>reactive 代理整个对象，主要用于处理引用类型（如对象、数组）</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ref 返回一个包含 .value 属性的对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { value: 0 }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ref 需要通过 .value 访问</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count.value) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// reactive 返回一个Proxy代理对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Proxy { count: 0 }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// reactive 直接访问属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state.count) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 0</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ref - 模板中自动解包，无需 .value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{ count }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;  &lt;!-- 自动解包 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// reactive - 直接访问属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{ state.count }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ol><li><p><strong>模板解包</strong>：基础数据类型（如数字，字符串，布尔值）不是对象，因此无法直接被<code>proxy</code>拦截。<code>proxy</code>可以拦截对象级别的操作，如属性访问、赋值、枚举等。使用<code>ref</code>创建的响应式引用在 Vue 模板中被自动解包。这意味着当你在模板中使用<code>ref</code>创建的变量时，可以直接使用而不需要每次都通过<code>.value</code>访问。如果使用<code>proxy</code>来处理基础类型，这种自动解包可能就无法实现，从而增加了模板中的代码复杂性。</p></li><li><p><strong>API 可读性</strong>：Vue3 提供了<code>ref</code>和<code>reactive</code>两种创建响应式对象的方式。<code>ref</code>用于创建基础类型的响应式引用，而<code>reactive</code>用于创建引用类型的响应式对象。这两种方式的 API 设计不同，<code>ref</code>返回的是一个对象，而<code>reactive</code>返回的是一个代理对象。这使得在模板中使用<code>ref</code>创建的变量时，不需要额外的<code>.value</code>访问，而在<code>reactive</code>创建的对象中，需要通过属性访问来获取值。</p></li><li><p><strong>内存性能考虑</strong>：虽然这可能不是主要因素，但使用<code>proxy</code>可能会比使用简单的 getter 和 setter 占用更多内存资源，尤其是在处理大量数据时。考虑到基础数据类型的简单性，使用更轻量级的解决方案（如 getter 和 setter）可能是一个更有效的选择</p></li></ol><p>Vue3 在处理基础数据类型时选择使用 ref 和 getter/setter 是基于对效率、简洁性、API 设计和开发者体验的综合考虑。这种方法为不同类型的数据提供了适当的响应式解决方案，同时保持了框架的整体一致性和易用性。</p><h2 id="_14-问题-vue响应式observer、dep、watcher" tabindex="-1">14. 问题：Vue响应式Observer、Dep、Watcher <a class="header-anchor" href="#_14-问题-vue响应式observer、dep、watcher" aria-label="Permalink to &quot;14. 问题：Vue响应式Observer、Dep、Watcher&quot;">​</a></h2><p>vue 响应式系统由 Observer、Dep、Watcher 三部分组成。</p><ul><li>Observer：负责将数据转换为响应式对象，当数据发生变化时，会通知 <code>Dep</code> 进行更新。</li><li>Dep：依赖收集器，负责收集依赖（<code>Watcher</code>）并在数据变化时通知它们进行更新。</li><li>Watcher：响应式依赖，当依赖的响应式数据发生变化时，会自动调用回调函数进行更新。</li></ul><p>在数据被读的时候，触发<code>get</code>方法，执行<code>Dep</code>来收集依赖，也就是收集<code>Watcher</code> 在数据被改的时候，触发<code>set</code>方法，通过对应的所有依赖<code>watcher</code>去执行更新</p></div></div></main><footer class="VPDocFooter" data-v-4fc62ba4 data-v-aed926c6><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-aed926c6><span class="visually-hidden" id="doc-footer-aria-label" data-v-aed926c6>Pager</span><div class="pager" data-v-aed926c6><a class="VPLink link pager-link prev" href="/my-docs/front-end/http/question.html" data-v-aed926c6><!--[--><span class="desc" data-v-aed926c6>Previous page</span><span class="title" data-v-aed926c6>计算机网络 题目</span><!--]--></a></div><div class="pager" data-v-aed926c6><a class="VPLink link pager-link next" href="/my-docs/front-end/wx/comparisonChart.html" data-v-aed926c6><!--[--><span class="desc" data-v-aed926c6>Next page</span><span class="title" data-v-aed926c6>对比图</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-8d5df4f8 data-v-982964aa><div class="container" data-v-982964aa><p class="message" data-v-982964aa>无限进步</p><p class="copyright" data-v-982964aa>Copyright © 2025-present orange</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"ZxdOHNi3\",\"front-end_code_question.md\":\"6YoqcPBz\",\"front-end_html_css_question.md\":\"BBpz1dZ_\",\"front-end_http_question.md\":\"C9P3Fi3J\",\"front-end_js_question.md\":\"BSnrxpOg\",\"front-end_ts_question.md\":\"DZgPzIdh\",\"front-end_vue_question.md\":\"CQmGe1Qy\",\"front-end_wx_comparisonchart.md\":\"i2m-wXUJ\",\"index.md\":\"EOAEMibc\",\"markdown-examples.md\":\"D0BANj14\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"无限进步\",\"description\":\"orange的学习文档\",\"base\":\"/my-docs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.jpg\",\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"zh\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}},\"outlineTitle\":\"文章目录\",\"outline\":[2,6],\"nav\":[{\"text\":\"Home\",\"link\":\"/\"}],\"sidebar\":[{\"text\":\"Examples\",\"items\":[{\"text\":\"Markdown Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"Runtime API Examples\",\"link\":\"/api-examples\"}]},{\"text\":\"前端面试题\",\"items\":[{\"text\":\"HTML+CSS 题目\",\"link\":\"/front-end/html+css/question\"},{\"text\":\"JavaScript 题目\",\"link\":\"/front-end/js/question\"},{\"text\":\"TypeScript 题目\",\"link\":\"/front-end/ts/question\"},{\"text\":\"代码编程 题目\",\"link\":\"/front-end/code/question\"},{\"text\":\"计算机网络 题目\",\"link\":\"/front-end/http/question\"},{\"text\":\"vue 题目\",\"link\":\"/front-end/vue/question\"}]},{\"text\":\"微信小程序\",\"items\":[{\"text\":\"对比图\",\"link\":\"/front-end/wx/comparisonChart\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}],\"footer\":{\"message\":\"无限进步\",\"copyright\":\"Copyright © 2025-present orange\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>